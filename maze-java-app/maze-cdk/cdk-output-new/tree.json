{"version":"tree-0.1","tree":{"id":"App","path":"","children":{"MazeCdkStack-3":{"id":"MazeCdkStack-3","path":"MazeCdkStack-3","children":{"MazeVpc":{"id":"MazeVpc","path":"MazeCdkStack-3/MazeVpc","children":{"Resource":{"id":"Resource","path":"MazeCdkStack-3/MazeVpc/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"MazeCdkStack-3/MazeVpc"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.194.0"}},"PublicSubnet1":{"id":"PublicSubnet1","path":"MazeCdkStack-3/MazeVpc/PublicSubnet1","children":{"Subnet":{"id":"Subnet","path":"MazeCdkStack-3/MazeVpc/PublicSubnet1/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.0.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"MazeCdkStack-3/MazeVpc/PublicSubnet1"}],"vpcId":{"Ref":"MazeVpcAC2E4A3B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.194.0"}},"Acl":{"id":"Acl","path":"MazeCdkStack-3/MazeVpc/PublicSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.194.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"MazeCdkStack-3/MazeVpc/PublicSubnet1/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"MazeCdkStack-3/MazeVpc/PublicSubnet1"}],"vpcId":{"Ref":"MazeVpcAC2E4A3B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.194.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"MazeCdkStack-3/MazeVpc/PublicSubnet1/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"MazeVpcPublicSubnet1RouteTableFC1246BF"},"subnetId":{"Ref":"MazeVpcPublicSubnet1Subnet9ACBA050"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.194.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"MazeCdkStack-3/MazeVpc/PublicSubnet1/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"MazeVpcIGW9535A224"},"routeTableId":{"Ref":"MazeVpcPublicSubnet1RouteTableFC1246BF"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.194.0"}},"EIP":{"id":"EIP","path":"MazeCdkStack-3/MazeVpc/PublicSubnet1/EIP","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"MazeCdkStack-3/MazeVpc/PublicSubnet1"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"2.194.0"}},"NATGateway":{"id":"NATGateway","path":"MazeCdkStack-3/MazeVpc/PublicSubnet1/NATGateway","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["MazeVpcPublicSubnet1EIPBE38552C","AllocationId"]},"subnetId":{"Ref":"MazeVpcPublicSubnet1Subnet9ACBA050"},"tags":[{"key":"Name","value":"MazeCdkStack-3/MazeVpc/PublicSubnet1"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.194.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{},{"addNatGateway":["*"]}]}},"PublicSubnet2":{"id":"PublicSubnet2","path":"MazeCdkStack-3/MazeVpc/PublicSubnet2","children":{"Subnet":{"id":"Subnet","path":"MazeCdkStack-3/MazeVpc/PublicSubnet2/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.64.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"MazeCdkStack-3/MazeVpc/PublicSubnet2"}],"vpcId":{"Ref":"MazeVpcAC2E4A3B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.194.0"}},"Acl":{"id":"Acl","path":"MazeCdkStack-3/MazeVpc/PublicSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.194.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"MazeCdkStack-3/MazeVpc/PublicSubnet2/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"MazeCdkStack-3/MazeVpc/PublicSubnet2"}],"vpcId":{"Ref":"MazeVpcAC2E4A3B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.194.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"MazeCdkStack-3/MazeVpc/PublicSubnet2/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"MazeVpcPublicSubnet2RouteTableFB3EA336"},"subnetId":{"Ref":"MazeVpcPublicSubnet2Subnet69D189F2"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.194.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"MazeCdkStack-3/MazeVpc/PublicSubnet2/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"MazeVpcIGW9535A224"},"routeTableId":{"Ref":"MazeVpcPublicSubnet2RouteTableFB3EA336"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.194.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{}]}},"PrivateSubnet1":{"id":"PrivateSubnet1","path":"MazeCdkStack-3/MazeVpc/PrivateSubnet1","children":{"Subnet":{"id":"Subnet","path":"MazeCdkStack-3/MazeVpc/PrivateSubnet1/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.128.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"MazeCdkStack-3/MazeVpc/PrivateSubnet1"}],"vpcId":{"Ref":"MazeVpcAC2E4A3B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.194.0"}},"Acl":{"id":"Acl","path":"MazeCdkStack-3/MazeVpc/PrivateSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.194.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"MazeCdkStack-3/MazeVpc/PrivateSubnet1/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"MazeCdkStack-3/MazeVpc/PrivateSubnet1"}],"vpcId":{"Ref":"MazeVpcAC2E4A3B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.194.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"MazeCdkStack-3/MazeVpc/PrivateSubnet1/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"MazeVpcPrivateSubnet1RouteTable3C070E73"},"subnetId":{"Ref":"MazeVpcPrivateSubnet1SubnetD0794F91"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.194.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"MazeCdkStack-3/MazeVpc/PrivateSubnet1/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"MazeVpcPublicSubnet1NATGatewayD7238F51"},"routeTableId":{"Ref":"MazeVpcPrivateSubnet1RouteTable3C070E73"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.194.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{}]}},"PrivateSubnet2":{"id":"PrivateSubnet2","path":"MazeCdkStack-3/MazeVpc/PrivateSubnet2","children":{"Subnet":{"id":"Subnet","path":"MazeCdkStack-3/MazeVpc/PrivateSubnet2/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.192.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"MazeCdkStack-3/MazeVpc/PrivateSubnet2"}],"vpcId":{"Ref":"MazeVpcAC2E4A3B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.194.0"}},"Acl":{"id":"Acl","path":"MazeCdkStack-3/MazeVpc/PrivateSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.194.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"MazeCdkStack-3/MazeVpc/PrivateSubnet2/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"MazeCdkStack-3/MazeVpc/PrivateSubnet2"}],"vpcId":{"Ref":"MazeVpcAC2E4A3B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.194.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"MazeCdkStack-3/MazeVpc/PrivateSubnet2/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"MazeVpcPrivateSubnet2RouteTable4A7A4C5D"},"subnetId":{"Ref":"MazeVpcPrivateSubnet2SubnetBF331A0C"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.194.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"MazeCdkStack-3/MazeVpc/PrivateSubnet2/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"MazeVpcPublicSubnet1NATGatewayD7238F51"},"routeTableId":{"Ref":"MazeVpcPrivateSubnet2RouteTable4A7A4C5D"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.194.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{}]}},"IGW":{"id":"IGW","path":"MazeCdkStack-3/MazeVpc/IGW","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"MazeCdkStack-3/MazeVpc"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.194.0"}},"VPCGW":{"id":"VPCGW","path":"MazeCdkStack-3/MazeVpc/VPCGW","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"MazeVpcIGW9535A224"},"vpcId":{"Ref":"MazeVpcAC2E4A3B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.194.0"}},"RestrictDefaultSecurityGroupCustomResource":{"id":"RestrictDefaultSecurityGroupCustomResource","path":"MazeCdkStack-3/MazeVpc/RestrictDefaultSecurityGroupCustomResource","children":{"Default":{"id":"Default","path":"MazeCdkStack-3/MazeVpc/RestrictDefaultSecurityGroupCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.194.0","metadata":["*"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.194.0","metadata":[{"maxAzs":"*","natGateways":"*"}]}},"Custom::VpcRestrictDefaultSGCustomResourceProvider":{"id":"Custom::VpcRestrictDefaultSGCustomResourceProvider","path":"MazeCdkStack-3/Custom::VpcRestrictDefaultSGCustomResourceProvider","children":{"Staging":{"id":"Staging","path":"MazeCdkStack-3/Custom::VpcRestrictDefaultSGCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.194.0"}},"Role":{"id":"Role","path":"MazeCdkStack-3/Custom::VpcRestrictDefaultSGCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.194.0"}},"Handler":{"id":"Handler","path":"MazeCdkStack-3/Custom::VpcRestrictDefaultSGCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.194.0"}},"MazeEcsCluster":{"id":"MazeEcsCluster","path":"MazeCdkStack-3/MazeEcsCluster","children":{"Resource":{"id":"Resource","path":"MazeCdkStack-3/MazeEcsCluster/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Cluster","aws:cdk:cloudformation:props":{}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnCluster","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.Cluster","version":"2.194.0","metadata":[{"vpc":"*"}]}},"MazeDbSecurityGroup":{"id":"MazeDbSecurityGroup","path":"MazeCdkStack-3/MazeDbSecurityGroup","children":{"Resource":{"id":"Resource","path":"MazeCdkStack-3/MazeDbSecurityGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for Maze RDS instance","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"cidrIp":{"Fn::GetAtt":["MazeVpcAC2E4A3B","CidrBlock"]},"ipProtocol":"tcp","fromPort":3306,"toPort":3306,"description":"Allow ECS tasks to access RDS"}],"vpcId":{"Ref":"MazeVpcAC2E4A3B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.194.0","metadata":[{"vpc":"*","description":"*","allowAllOutbound":true},{"addIngressRule":[{"canInlineRule":true,"connections":"*","uniqueId":"*"},{},"*",false]}]}},"MazeDatabase":{"id":"MazeDatabase","path":"MazeCdkStack-3/MazeDatabase","children":{"SubnetGroup":{"id":"SubnetGroup","path":"MazeCdkStack-3/MazeDatabase/SubnetGroup","children":{"Default":{"id":"Default","path":"MazeCdkStack-3/MazeDatabase/SubnetGroup/Default","attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBSubnetGroup","aws:cdk:cloudformation:props":{"dbSubnetGroupDescription":"Subnet group for MazeDatabase database","subnetIds":[{"Ref":"MazeVpcPrivateSubnet1SubnetD0794F91"},{"Ref":"MazeVpcPrivateSubnet2SubnetBF331A0C"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBSubnetGroup","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.SubnetGroup","version":"2.194.0","metadata":[{"description":"*","vpc":"*","vpcSubnets":{"subnetType":"Private"},"removalPolicy":"*"}]}},"Secret":{"id":"Secret","path":"MazeCdkStack-3/MazeDatabase/Secret","children":{"Resource":{"id":"Resource","path":"MazeCdkStack-3/MazeDatabase/Secret/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"description":{"Fn::Join":["",["Generated by the CDK for stack: ",{"Ref":"AWS::StackName"}]]},"generateSecretString":{"passwordLength":30,"secretStringTemplate":"{\"username\":\"maze_admin\"}","generateStringKey":"password","excludeCharacters":" %+~`#$&*()|[]{}:;<>?!'/@\"\\"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.194.0"}},"Attachment":{"id":"Attachment","path":"MazeCdkStack-3/MazeDatabase/Secret/Attachment","children":{"Resource":{"id":"Resource","path":"MazeCdkStack-3/MazeDatabase/Secret/Attachment/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::SecretTargetAttachment","aws:cdk:cloudformation:props":{"secretId":{"Ref":"MazeCdkStack3MazeDatabaseSecret42B6C26E3fdaad7efa858a3daf9490cf0a702aeb"},"targetId":{"Ref":"MazeDatabaseF02F1276"},"targetType":"AWS::RDS::DBInstance"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecretTargetAttachment","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.SecretTargetAttachment","version":"2.194.0","metadata":[{"secret":"*","target":"*"}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseSecret","version":"2.194.0","metadata":[{"encryptionKey":"*","secretName":"*","replicaRegions":"*"},{"username":"*","secretName":"*","encryptionKey":"*","excludeCharacters":"*","replaceOnPasswordCriteriaChanges":true,"replicaRegions":"*"}]}},"Resource":{"id":"Resource","path":"MazeCdkStack-3/MazeDatabase/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBInstance","aws:cdk:cloudformation:props":{"allocatedStorage":"20","backupRetentionPeriod":7,"copyTagsToSnapshot":true,"dbInstanceClass":"db.t3.micro","dbName":"maze_db","dbSubnetGroupName":{"Ref":"MazeDatabaseSubnetGroup24D16C74"},"engine":"mysql","engineVersion":"8.0","masterUsername":"maze_admin","masterUserPassword":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"MazeCdkStack3MazeDatabaseSecret42B6C26E3fdaad7efa858a3daf9490cf0a702aeb"},":SecretString:password::}}"]]},"maxAllocatedStorage":100,"publiclyAccessible":false,"storageType":"gp2","vpcSecurityGroups":[{"Fn::GetAtt":["MazeDbSecurityGroup7E3E9114","GroupId"]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBInstance","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseInstance","version":"2.194.0","metadata":[{"engine":{"engineType":"*","singleUserRotationApplication":"*","engineVersion":{"fullVersion":"*","majorVersion":"*"},"parameterGroupFamily":"*","engineFamily":"*","supportsReadReplicaBackups":true},"vpc":"*","vpcSubnets":{"subnetType":"Private"},"instanceType":"*","allocatedStorage":"*","maxAllocatedStorage":"*","databaseName":"*","removalPolicy":"snapshot","backupRetention":"*","credentials":"*","securityGroups":["*"]}]}},"MazeTaskDef":{"id":"MazeTaskDef","path":"MazeCdkStack-3/MazeTaskDef","children":{"TaskRole":{"id":"TaskRole","path":"MazeCdkStack-3/MazeTaskDef/TaskRole","children":{"ImportTaskRole":{"id":"ImportTaskRole","path":"MazeCdkStack-3/MazeTaskDef/TaskRole/ImportTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.194.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"MazeCdkStack-3/MazeTaskDef/TaskRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.194.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}}]}},"Resource":{"id":"Resource","path":"MazeCdkStack-3/MazeTaskDef/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"cpu":256,"essential":true,"image":"yennanliu/maze-app:latest","memory":512,"name":"MazeContainer","portMappings":[{"containerPort":8080,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"MazeTaskDefMazeContainerLogGroup4C11E95F"},"awslogs-stream-prefix":"MazeApp","awslogs-region":{"Ref":"AWS::Region"}}},"environment":[{"name":"SPRING_DATASOURCE_URL","value":{"Fn::Join":["",["jdbc:mysql://",{"Fn::GetAtt":["MazeDatabaseF02F1276","Endpoint.Address"]},":3306/maze_db"]]}},{"name":"SPRING_DATASOURCE_USERNAME","value":"maze_admin"},{"name":"SPRING_JPA_HIBERNATE_DDL_AUTO","value":"update"},{"name":"SPRING_JPA_SHOW_SQL","value":"true"},{"name":"SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT","value":"org.hibernate.dialect.MySQL8Dialect"},{"name":"JAVA_TOOL_OPTIONS","value":"-XX:+UseContainerSupport -XX:MaxRAMPercentage=75.0"}],"secrets":[{"name":"SPRING_DATASOURCE_PASSWORD","valueFrom":{"Fn::Join":["",[{"Ref":"MazeDatabaseSecretAttachmentCF8A2EE5"},":password::"]]}}]}],"cpu":"512","executionRoleArn":{"Fn::GetAtt":["MazeTaskDefExecutionRole9294BB9E","Arn"]},"family":"MazeCdkStack3MazeTaskDefEC61648F","memory":"1024","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"runtimePlatform":{"cpuArchitecture":"X86_64","operatingSystemFamily":"LINUX"},"taskRoleArn":{"Fn::GetAtt":["MazeTaskDefTaskRoleBA47DE06","Arn"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.194.0"}},"MazeContainer":{"id":"MazeContainer","path":"MazeCdkStack-3/MazeTaskDef/MazeContainer","children":{"LogGroup":{"id":"LogGroup","path":"MazeCdkStack-3/MazeTaskDef/MazeContainer/LogGroup","children":{"Resource":{"id":"Resource","path":"MazeCdkStack-3/MazeTaskDef/MazeContainer/LogGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.194.0","metadata":[{"retention":"*"}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.194.0"}},"ExecutionRole":{"id":"ExecutionRole","path":"MazeCdkStack-3/MazeTaskDef/ExecutionRole","children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"MazeCdkStack-3/MazeTaskDef/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.194.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"MazeCdkStack-3/MazeTaskDef/ExecutionRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.194.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MazeCdkStack-3/MazeTaskDef/ExecutionRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"MazeCdkStack-3/MazeTaskDef/ExecutionRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["MazeTaskDefMazeContainerLogGroup4C11E95F","Arn"]}},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Ref":"MazeDatabaseSecretAttachmentCF8A2EE5"}}],"Version":"2012-10-17"},"policyName":"MazeTaskDefExecutionRoleDefaultPolicy30037A97","roles":[{"Ref":"MazeTaskDefExecutionRole9294BB9E"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.194.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.194.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"roleName":"*"},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.194.0","metadata":["*","*","*","*","*","*"]}},"MazeService":{"id":"MazeService","path":"MazeCdkStack-3/MazeService","children":{"Service":{"id":"Service","path":"MazeCdkStack-3/MazeService/Service","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"MazeEcsClusterF88CB655"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50},"enableEcsManagedTags":false,"healthCheckGracePeriodSeconds":60,"launchType":"FARGATE","loadBalancers":[{"targetGroupArn":{"Ref":"MazeALBMazeListenerMazeEcsTargetsGroupCE3C4808"},"containerName":"MazeContainer","containerPort":8080}],"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"MazeVpcPrivateSubnet1SubnetD0794F91"},{"Ref":"MazeVpcPrivateSubnet2SubnetBF331A0C"}],"securityGroups":[{"Fn::GetAtt":["MazeServiceSecurityGroup266646EE","GroupId"]}]}},"taskDefinition":{"Ref":"MazeTaskDef5C51DBFF"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.194.0"}},"SecurityGroup":{"id":"SecurityGroup","path":"MazeCdkStack-3/MazeService/SecurityGroup","children":{"Resource":{"id":"Resource","path":"MazeCdkStack-3/MazeService/SecurityGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"MazeCdkStack-3/MazeService/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"MazeVpcAC2E4A3B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.194.0"}},"from MazeCdkStack3MazeALBSecurityGroupA628F41F:8080":{"id":"from MazeCdkStack3MazeALBSecurityGroupA628F41F:8080","path":"MazeCdkStack-3/MazeService/SecurityGroup/from MazeCdkStack3MazeALBSecurityGroupA628F41F:8080","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","fromPort":8080,"groupId":{"Fn::GetAtt":["MazeServiceSecurityGroup266646EE","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["MazeALBSecurityGroup8DA20196","GroupId"]},"toPort":8080}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.194.0","metadata":[{"vpc":"*"},{"addIngressRule":["*",{},"*",false]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.194.0","metadata":["*"]}},"MazeALB":{"id":"MazeALB","path":"MazeCdkStack-3/MazeALB","children":{"Resource":{"id":"Resource","path":"MazeCdkStack-3/MazeALB/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::LoadBalancer","aws:cdk:cloudformation:props":{"loadBalancerAttributes":[{"key":"deletion_protection.enabled","value":"false"}],"scheme":"internet-facing","securityGroups":[{"Fn::GetAtt":["MazeALBSecurityGroup8DA20196","GroupId"]}],"subnets":[{"Ref":"MazeVpcPublicSubnet1Subnet9ACBA050"},{"Ref":"MazeVpcPublicSubnet2Subnet69D189F2"}],"type":"application"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnLoadBalancer","version":"2.194.0"}},"SecurityGroup":{"id":"SecurityGroup","path":"MazeCdkStack-3/MazeALB/SecurityGroup","children":{"Resource":{"id":"Resource","path":"MazeCdkStack-3/MazeALB/SecurityGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatically created Security Group for ELB MazeCdkStack3MazeALB6BE8EBA6","securityGroupIngress":[{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":80,"toPort":80,"description":"Allow from anyone on port 80"}],"vpcId":{"Ref":"MazeVpcAC2E4A3B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.194.0"}},"to MazeCdkStack3MazeServiceSecurityGroup8250EE33:8080":{"id":"to MazeCdkStack3MazeServiceSecurityGroup8250EE33:8080","path":"MazeCdkStack-3/MazeALB/SecurityGroup/to MazeCdkStack3MazeServiceSecurityGroup8250EE33:8080","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupEgress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","destinationSecurityGroupId":{"Fn::GetAtt":["MazeServiceSecurityGroup266646EE","GroupId"]},"fromPort":8080,"groupId":{"Fn::GetAtt":["MazeALBSecurityGroup8DA20196","GroupId"]},"ipProtocol":"tcp","toPort":8080}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupEgress","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.194.0","metadata":[{"vpc":"*","description":"*","allowAllOutbound":false},{"addIngressRule":[{"canInlineRule":true,"connections":"*","uniqueId":"*"},{},"*",false]},{"addEgressRule":["*",{},"*",true]}]}},"MazeListener":{"id":"MazeListener","path":"MazeCdkStack-3/MazeALB/MazeListener","children":{"Resource":{"id":"Resource","path":"MazeCdkStack-3/MazeALB/MazeListener/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::Listener","aws:cdk:cloudformation:props":{"defaultActions":[{"type":"forward","targetGroupArn":{"Ref":"MazeALBMazeListenerMazeEcsTargetsGroupCE3C4808"}}],"loadBalancerArn":{"Ref":"MazeALBD0E6A4EB"},"port":80,"protocol":"HTTP"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListener","version":"2.194.0"}},"MazeEcsTargetsGroup":{"id":"MazeEcsTargetsGroup","path":"MazeCdkStack-3/MazeALB/MazeListener/MazeEcsTargetsGroup","children":{"Resource":{"id":"Resource","path":"MazeCdkStack-3/MazeALB/MazeListener/MazeEcsTargetsGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"healthCheckIntervalSeconds":30,"healthCheckPath":"/","healthCheckPort":"8080","healthCheckTimeoutSeconds":5,"healthyThresholdCount":2,"port":8080,"protocol":"HTTP","targetGroupAttributes":[{"key":"stickiness.enabled","value":"false"}],"targetType":"ip","unhealthyThresholdCount":2,"vpcId":{"Ref":"MazeVpcAC2E4A3B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListener","version":"2.194.0","metadata":["*","*","*","*"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer","version":"2.194.0","metadata":["*","*"]}},"MazeAppUrl":{"id":"MazeAppUrl","path":"MazeCdkStack-3/MazeAppUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.194.0"}},"DatabaseEndpoint":{"id":"DatabaseEndpoint","path":"MazeCdkStack-3/DatabaseEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.194.0"}},"DatabaseSecretArn":{"id":"DatabaseSecretArn","path":"MazeCdkStack-3/DatabaseSecretArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.194.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"MazeCdkStack-3/CDKMetadata","children":{"Default":{"id":"Default","path":"MazeCdkStack-3/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.194.0"}},"Condition":{"id":"Condition","path":"MazeCdkStack-3/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.194.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"MazeCdkStack-3/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.194.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"MazeCdkStack-3/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.194.0"}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.194.0"}}}